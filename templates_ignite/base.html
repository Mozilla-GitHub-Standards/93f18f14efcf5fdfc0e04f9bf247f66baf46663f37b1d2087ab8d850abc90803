<!DOCTYPE html>
<!--[if (lt IE 9)]><html class="no-js bad-ie" lang="{{ LANG }}" dir="{{ DIR }}"><![endif]-->
<!--[if (gt IE 8)|!(IE)]><html class="no-js" lang="{{ LANG }}" dir="{{ DIR }}"><![endif]-->
<head>
    <title>{% block page_title %}{% endblock %}Mozilla Ignite</title>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
    <meta name="viewport" content="initial-scale=1.0, width=device-width">
    {% block site_css %}
        {{ css('ignite_devices') }}
    {% endblock %}
    <link rel="stylesheet" media="all and (min-width:30em)" href="{{ MEDIA_URL }}/ignite/css/desktop.css" />
    <script src="https://browserid.org/include.js"></script>
    <!--[if lt IE 9]>
        <script type="text/javascript" src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body id="{% block page_id %}{% endblock %}" class="{% block section_class %}{% endblock %}">
    <script type="text/javascript">
        document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/, '');
        var ignite = window.ignite || {};
    </script>
    <header class="masthead">
        <div class="busta clearfix">
            {% block site_title %}<p class="brand"><a href="{{ url('challenge_show') }}">Mozilla + Us Ignite</a></p>{% endblock %}
            <a href="http://www.mozilla.org" class="tab">mozilla.org</a>
            <nav>
                <ul>
                    <li><a href="#">{{ _('About the challenge') }}</a></li>
                    <li><a href="#">{{ _('Submissions') }}</a></li>
                    <li><a href="#">{{ _('Judges') }}</a></li>
                    <li><a href="#">{{ _('Blog') }}</a></li>
                    {% block login %}
                    {% if not user.is_authenticated() %}
                        <li>{% include "registration/_login_form.html" %}</li>
                    {% else %} 
                        <li><a class="logout" href="{{ url('logout') }}">{{ _('Log out') }}</a></li>
                    {% endif %}
                    {% endblock %}
                </ul>
            </nav>
            {% if user.is_authenticated() %}
            <div style="font-size: 12px;">
                <p style="clear: both; float: left; margin-right: 20px;">Signed in as {{ user.get_profile().display_name }}</p>
                <a style="float: left; text-transform: lowercase; margin-right: 20px;" href="{{ url('users_profile', username=user.username) }}">View profile</a>
                <a style="float: left; text-transform: lowercase;" href="{{ url('users_edit') }}">Edit profile</a>
            </div>
            {% endif %}
        </div>
    </header>
    <div role="main">
    <section>
    <div class="promo">
        <div class="busta">
            {% block header %}{% endblock %}
        </div>
    </div>
    {% block alerts %}
    {% if messages %}
    <section class="alerts">
        <ul class="busta">
            {% for message in messages %}
                <li>{{ message|safe }}</li>
            {% endfor %}
        </ul>
    </section>
    {% endif %}
    {% endblock %}
    <div class="entre">
        <div class="busta">
            {% block content %}{% endblock %}
        </div>
    </div>
    </section>
    </div>
    {% block footer %}
    <aside>
        <section class="external">
            <div class="busta">
            <div class="col box tweet">
                <h2>Follow and tweet</h2>
                <p>What becomes possible at 1<abbr title="Gigabit per second">GBps</abbr>? What's the future of the web? Tweet your ideas with the tags <a href="https://twitter.com/#!/search?q=%23mozignite">#mozignite</a> and <a href="https://twitter.com/#!/search?q=%23usignite">#usignite</a>. (And we might just give you a treat)</p>
            </div>
            <div class="col box learn">
                <h2>Learn more</h2>
                <ul>
                    <li><a href="mailto:ben@mozillafoundation.org">Contact us</a></li>
                    <li><a href="http://www.geni.org">Visit <abbr title="Global Environment for Network Innovations">GENI</abbr> website</a></li>
                    <li><a href="http://www.nsf.gov/cise/usignite/">Visit <abbr title="United States">US</abbr> Ignite website</a></li>
                </ul>
            </div>
            <div class="col box mozilla">
                <h2>Connect with Mozilla</h2>
                <ul>
                    <li><a href="http://www.mozilla.org/about/mission.html">Learn about Mozilla's mission</a></li>
                    <li><a href="https://donate.mozilla.org/join/">Join Mozilla</a></li>
                    <li><a href="http://www.facebook.com/mozilladrumbeat/">Like us on Facebook</a></li>
                </ul>
            </div>
            </div>
        </section>
        <section class="partners">
            <div class="busta">
            <h2>Our partners</h2>
            <ul>
                <li><a href="http://www.nsf.gov"><img src="{{ MEDIA_URL }}ignite/img/partners/nsf.png" width="120" height="100" alt="National Science Foundation" /></a></li>
                <li><a href="http://www.geni.net"><img src="{{ MEDIA_URL }}ignite/img/partners/geni.png" width="120" height="100" alt="geni - exploring networks of the future" /></a></li>
            </ul>
            </div>
        </section>
    </aside>
    {% endblock %}
    {% block site_js %}
        {{ js('ignite_core') }}
    {% endblock %}
    <script>
    $(function() {
        $('#browserid').bind('click', function(e) {
            e.preventDefault();
            navigator.id.getVerifiedEmail(function(assertion) {
                if (assertion) {
                    var $e = $('#id_assertion');
                    $e.val(assertion.toString());
                    $e.parent().submit();
                }
            });
        });
    });
    </script>
    {% if not waffle.switch('in_dev') %}
        <script type="text/javascript">
            var uvOptions = {};
            (function() {
                var uv = document.createElement('script'); uv.type = 'text/javascript'; uv.async = true;
                uv.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'widget.uservoice.com/s399jcs76KmYlVNnbr8hKQ.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(uv, s);
            })();
        </script>
    {% endif %}
</body>
</html>

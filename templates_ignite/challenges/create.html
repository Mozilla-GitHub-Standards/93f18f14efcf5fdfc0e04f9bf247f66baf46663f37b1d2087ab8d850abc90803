{% extends 'second_base.html' %}

{% block page_title %}{% if errors %}{{ _('Errors in your submission') }} | {% endif %}{{ _('Create submission') }} | {% endblock %}

{% block page_id %}create_submission{% endblock %}

{% block section_class %}entries{% endblock %}

{% block alerts %}
{% if errors %}
<section class="alerts errors">
    {% trans count=errors|length %}
    <p>You have {{ count }} error in your submission. Please correct this before you can submit an idea.</p>
    {% pluralize %}
    <p>You have {{ count }} errors in your submission. Please correct this before you can submit an idea.</p>
    {% endtrans %}
</section>
{% endif %}
{% endblock %}

{% block content %}   
<h1 class="shout">{{ _('Submit an idea') }}</h1>
<p class="announce">{{ _("Congratulations! You've taken the first setp towards making the world, and the internet, a better place. By submitting your idea you're one step closer to making your vision a reality. Fill out the form below to get started in the Mozilla Ignite Challenge.") }}</p>
<form action="" method="post" enctype="multipart/form-data">
    {{ csrf()|safe }}
    <fieldset class="stacked_field highlight focus_areas columns">
        <legend><span class="announce">{{ _('Pick a category') }}</span></legend>
        {{ form.category }}
    </fieldset>
    <div class="highlight">
        <label for="id_title" class="announce">{{ _('Give your idea a title') }}</label>
        {{ form.title }}
    </div>
    <div class="highlight">
        <label for="wmd-input" class="announce">{{ _('Tell us about your idea') }}</label>
        <p class="hint" id="info_description">{{ _('Take some time to provide us with a more detailed description. You can use basic HTML and Markdown') }}</p>
        <div class="wmd-region">
        {{ form.description }}
        </div>
     </div>
<div class="highlight">
        <label for="id_brief_description" class="announce">{{ _('Summarize in 140 characters or less') }}</label>
        {{ form.brief_description }}
     </div>

     <div class="image_field highlight">
        <label for="id_sketh_note" class="announce">{{ _('Napkin sketch') }}</label>
        <p class="hint" id="info_annouce">{{ _('If your idea makes more sense on paper please include a diagram. <em>(png, jpg, gif)</em>') }}</p>
        {% if form.sketh_note.value() %}
            <div class="frame box">
                <img src="{{ MEDIA_URL }}{{ form.sketh_note.value() }}" alt="" />
            </div>
            <input id="sketh_note-clear_id" type="checkbox" name="sketh_note-clear" />
            <label for="sketh_note-clear_id">{{ _('Delete the current image') }}</label>
            <p>{{ _("If you don't like what you've currently got upload a different image") }}</p>
            <input type="file" id="id_sketh_note" name="sketh_note" />
        {% else %}
            {{ form.sketh_note }}
        {% endif %}
     </div>
     <fieldset class="external_links highlight">
        <legend><span class="announce">{{ _('External links') }}</span></legend>
        <p class="hint">If you've got additional information about your idea elsewhere on the internet (like youtube, extra napkin sketches or blog posts) please include them here. The more information you provide, the better!</p>
        {{ link_form.management_form }}
        {% for link in link_form.forms %}
            <div class="inline_field">
                {% for field in link.hidden_fields() %}
                {{ field }}
                {% endfor %}
                
                {% for field in link.visible_fields() %}
                    {{ field.label_tag() }}
                    {{ field }}
                {% endfor %}
            </div>
        {% endfor %}
     </fieldset>
     <div class="inline_field">
        {{ form.is_draft }}
        <label for="id_is_draft" class="announce">{{ _('Save as draft?') }}</label>
        <p class="hint" id="info_is_draft">{{ _("Not ready for the world to see your idea yet? Save as draft and it will go public when you're ready.") }}</p>
     </div>
     {% block submit %}
     <input class="cta" type="submit" value="{{ _('Create idea') }}" />
     {% endblock %}
</form>
{% endblock %}
